╔══════════════════════════════════════════════════════════════════════════════╗
║                        SSH自动化部署 - 快速参考卡                            ║
╚══════════════════════════════════════════════════════════════════════════════╝

📋 服务器连接信息
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  主机: yushuo.click
  端口: 22
  用户: root
  密码: gJ75hNHdy90TA4qGo9
  项目: /www/wwwroot/stock-tracker
  域名: http://bk.yushuo.click


🌟 推荐部署方案 (按优先级排序)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

┌─ 方案1: Web SSH (最简单) ─────────────────────────────────────────────────┐
│                                                                              │
│ 1. 打开宝塔面板/cPanel/云服务商控制台                                       │
│ 2. 找到Terminal/终端/SSH工具                                                │
│ 3. 复制粘贴下面的一键命令                                                   │
│ 4. 回车执行，等待完成                                                       │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘

┌─ 方案2: SSH客户端工具 ────────────────────────────────────────────────────┐
│                                                                              │
│ 推荐工具:                                                                    │
│   • MobaXterm (Windows): https://mobaxterm.mobatek.net/                     │
│   • PuTTY (Windows): https://www.putty.org/                                 │
│   • Termius (跨平台): https://termius.com/                                  │
│                                                                              │
│ 连接后，复制粘贴一键命令                                                    │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘


🚀 一键部署命令 (复制粘贴执行)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

cd /www/wwwroot/stock-tracker && \
docker-compose down && \
git fetch --all && \
git reset --hard origin/main && \
git pull origin main && \
git log -1 && \
chmod +x deploy.sh && \
./deploy.sh && \
sleep 30 && \
docker-compose ps && \
docker-compose logs --tail=50 stock-tracker && \
curl -I http://localhost:3002


✅ 预期结果
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

容器状态:
  stock-tracker-app       Up (healthy)
  stock-tracker-mysql     Up (healthy)

HTTP响应:
  HTTP/1.1 200 OK

访问地址:
  http://bk.yushuo.click


🔍 快速检查命令
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# 查看容器状态
docker-compose ps

# 查看应用日志
docker-compose logs -f stock-tracker

# 测试访问
curl -I http://localhost:3002

# 重启服务
docker-compose restart


📝 故障排查
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

如果容器未启动:
  docker-compose logs stock-tracker
  docker-compose restart

如果502错误:
  docker-compose logs -f stock-tracker
  docker exec stock-tracker-app netstat -tulpn | grep 3002

如果数据库错误:
  docker-compose logs mysql
  docker exec -it stock-tracker-mysql mysql -uroot -proot123456

如果域名无法访问:
  nginx -t
  nginx -s reload


📚 详细文档
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  📄 详细部署指南: log/ssh-deployment-guide-20250930.md
  📄 完整状态报告: log/ssh-deployment-status-20250930.md
  📄 分步命令清单: deploy-ssh-commands.txt


💡 温馨提示
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ⚠️ 由于网络限制，直接SSH连接可能超时
  ✅ 使用Web SSH是最可靠的方式
  ✅ 部署需要约1-2分钟完成
  ✅ 如有问题，查看详细文档


╔══════════════════════════════════════════════════════════════════════════════╗
║                         祝您部署顺利！🎉                                      ║
╚══════════════════════════════════════════════════════════════════════════════╝