# ðŸš€ v4.11éƒ¨ç½²æŒ‡å— - ä¿®å¤æ¶¨åœæ•°å¼¹çª—çŠ¶æ€åˆ—

## âš ï¸ é—®é¢˜è¯´æ˜Ž
å½“å‰æœåŠ¡å™¨è¿è¡Œçš„æ˜¯**v4.9ä¹‹å‰çš„æ—§ç‰ˆæœ¬**ï¼Œæ¶¨åœæ•°å¼¹çª—ä¸­**æ²¡æœ‰çŠ¶æ€åˆ—**æ˜¾ç¤ºè¿žæ¿æ•°ã€‚

v4.11ç‰ˆæœ¬å·²åœ¨æœ¬åœ°å®Œæˆå¹¶æŽ¨é€åˆ°GitHubï¼Œéœ€è¦éƒ¨ç½²åˆ°æœåŠ¡å™¨ã€‚

## âœ… éƒ¨ç½²æ­¥éª¤

### æ–¹æ³•1: å®å¡”é¢æ¿ç»ˆç«¯ â­ æŽ¨è

1. **ç™»å½•å®å¡”é¢æ¿**
   - è®¿é—®: `http://ä½ çš„æœåŠ¡å™¨IP:8888`
   - æˆ–: `https://ä½ çš„æœåŠ¡å™¨IP:8888`

2. **æ‰“å¼€ç»ˆç«¯**
   - ç‚¹å‡»å·¦ä¾§èœå• "ç»ˆç«¯"
   - æˆ–ç‚¹å‡»é¡¶éƒ¨ "ç»ˆç«¯" å›¾æ ‡

3. **æ‰§è¡Œéƒ¨ç½²å‘½ä»¤**
   ```bash
   cd /www/wwwroot/stock-tracker

   # æ‹‰å–æœ€æ–°ä»£ç 
   git pull origin main

   # åœæ­¢å®¹å™¨
   docker-compose down

   # é‡æ–°æž„å»ºï¼ˆå…³é”®ï¼šæ¸…é™¤ç¼“å­˜ï¼‰
   docker-compose build --no-cache

   # å¯åŠ¨æœåŠ¡
   docker-compose up -d

   # ç­‰å¾…30ç§’è®©æœåŠ¡å¯åŠ¨
   sleep 30

   # æ£€æŸ¥çŠ¶æ€
   docker ps | grep stock-tracker
   ```

4. **é¢„æœŸè¾“å‡º**
   ```
   From https://github.com/yushuo1991/911
      ea2314a..f790995  main -> origin/main
   Updating ea2314a..f790995
   ...
   [+] Building 120.5s
   [+] Running 2/2
    âœ” Container stock-tracker-mysql-1  Started
    âœ” Container stock-tracker-app-1    Started
   ```

### æ–¹æ³•2: SSHå®¢æˆ·ç«¯

å¦‚æžœæœ‰SSHå®¢æˆ·ç«¯ï¼ˆPuTTYã€Xshellã€MobaXtermç­‰ï¼‰ï¼š

1. è¿žæŽ¥æœåŠ¡å™¨: `ssh root@yushuo.click`
2. æ‰§è¡Œä¸Šè¿°ç›¸åŒå‘½ä»¤

### æ–¹æ³•3: ä¸€é”®éƒ¨ç½²è„šæœ¬

åœ¨æœåŠ¡å™¨åˆ›å»ºè„šæœ¬æ–‡ä»¶ï¼š
```bash
cat > /tmp/deploy-v4.11.sh << 'EOF'
#!/bin/bash
set -e

echo "ðŸ“¦ å¼€å§‹éƒ¨ç½²v4.11..."

cd /www/wwwroot/stock-tracker

echo "ðŸ”„ æ‹‰å–æœ€æ–°ä»£ç ..."
git pull origin main

echo "â¹ï¸  åœæ­¢å®¹å™¨..."
docker-compose down

echo "ðŸ”¨ é‡æ–°æž„å»ºé•œåƒï¼ˆæ¸…é™¤ç¼“å­˜ï¼‰..."
docker-compose build --no-cache

echo "ðŸš€ å¯åŠ¨æœåŠ¡..."
docker-compose up -d

echo "â³ ç­‰å¾…æœåŠ¡å¯åŠ¨..."
sleep 30

echo "âœ… æ£€æŸ¥æœåŠ¡çŠ¶æ€..."
docker ps | grep stock-tracker

echo ""
echo "ðŸŽ‰ éƒ¨ç½²å®Œæˆï¼è¯·è®¿é—® http://bk.yushuo.click éªŒè¯"
echo ""
echo "ðŸ“‹ éªŒè¯æ¸…å•ï¼š"
echo "  1. ç‚¹å‡»ä»»æ„æ—¥æœŸçš„'XXåªæ¶¨åœ'"
echo "  2. æ£€æŸ¥å¼¹çª—ä¸­æ˜¯å¦æœ‰'çŠ¶æ€'åˆ—"
echo "  3. çŠ¶æ€åˆ—åº”æ˜¾ç¤º: é¦–æ¿ã€2æ¿ã€3æ¿ç­‰"
EOF

chmod +x /tmp/deploy-v4.11.sh
/tmp/deploy-v4.11.sh
```

## ðŸ§ª éƒ¨ç½²éªŒè¯

### 1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
- Windows/Linux: `Ctrl + Shift + R`
- Mac: `Cmd + Shift + R`

### 2. è®¿é—®ç½‘ç«™
æ‰“å¼€ `http://bk.yushuo.click`

### 3. æµ‹è¯•æ¶¨åœæ•°å¼¹çª—
1. ç‚¹å‡»ä»»æ„æ—¥æœŸï¼ˆå¦‚09-23ï¼‰çš„"53åªæ¶¨åœ"
2. æ£€æŸ¥å¼¹çª—è¡¨æ ¼ç»“æž„ï¼š

**æ­£ç¡®æ˜¾ç¤º** âœ…:
```
| åç§°     | çŠ¶æ€  | 09-24 | 09-25 | 09-26 | 09-29 | 09-30 | è®¡   |
|----------|-------|-------|-------|-------|-------|-------|------|
| å¾·æ˜Žåˆ©   | 3æ¿   | +6.7  | -2.6  | -2.8  | +8.0  | +10.0 | +19.3|
| å¼ æ±Ÿé«˜ç§‘ | é¦–æ¿  | +10.0 | +2.7  | -0.1  | -1.7  | +7.3  | +18.2|
```

**é”™è¯¯æ˜¾ç¤º** âŒ:
```
| åç§°     | 09-24 | 09-25 | 09-26 | 09-29 | 09-30 | è®¡   |
|----------|-------|-------|-------|-------|-------|------|
| å¾·æ˜Žåˆ©   | +6.7  | -2.6  | -2.8  | +8.0  | +10.0 | +19.3|
```

### 4. æ£€æŸ¥çŠ¶æ€åˆ—é¢œè‰²
- **é¦–æ¿/1æ¿**: ç°è‰²æ–‡å­—
- **2æ¿**: æ©™è‰²æ–‡å­—
- **3æ¿åŠä»¥ä¸Š**: çº¢è‰²æ–‡å­—

### 5. æ£€æŸ¥æ—¥æœŸåˆ—è¯¦æƒ…å¼¹çª—ï¼ˆv4.11ä¼˜åŒ–ï¼‰
1. ç‚¹å‡»"7å¤©æ¶¨åœé˜¶æ¢¯"å¼¹çª—ä¸­çš„æ—¥æœŸè¡¨å¤´
2. æ£€æŸ¥å¼¹çª—å·¦ä¾§ç©ºç™½æ˜¯å¦å‡å°‘ï¼ˆæ›´ç´§å‡‘ï¼‰

## ðŸ”§ æ•…éšœæŽ’æŸ¥

### é—®é¢˜1: git pullå¤±è´¥
```bash
# é‡ç½®æœ¬åœ°ä¿®æ”¹
cd /www/wwwroot/stock-tracker
git reset --hard HEAD
git pull origin main
```

### é—®é¢˜2: å®¹å™¨å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹æ—¥å¿—
docker-compose logs app

# é‡å¯æœåŠ¡
docker-compose restart
```

### é—®é¢˜3: ä»ç„¶æ˜¾ç¤ºæ—§ç‰ˆæœ¬
```bash
# æ£€æŸ¥Gitç‰ˆæœ¬
git log --oneline -1
# åº”æ˜¾ç¤º: f790995 feat: v4.11 ä¼˜åŒ–æ—¥æœŸåˆ—è¯¦æƒ…å¼¹çª—å¸ƒå±€å‡å°‘å·¦ä¾§ç©ºç™½

# æ£€æŸ¥ä»£ç 
grep -n "td_type.replace" src/app/page.tsx
# åº”æ‰¾åˆ°3å¤„ç»“æžœï¼ˆè¡Œ665, 1030, 1352ï¼‰

# å®Œå…¨é‡æ–°æž„å»º
docker-compose down -v  # åˆ é™¤å·
docker system prune -f  # æ¸…ç†ç¼“å­˜
docker-compose up -d --build --force-recreate
```

### é—®é¢˜4: æµè§ˆå™¨ä»æ˜¾ç¤ºæ—§ç•Œé¢
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜: `Ctrl + Shift + R`
2. æˆ–ä½¿ç”¨éšç§æ¨¡å¼/æ— ç—•æ¨¡å¼è®¿é—®
3. æˆ–æ¸…é™¤ç«™ç‚¹æ•°æ®:
   - Chrome: F12 â†’ Application â†’ Clear site data
   - Firefox: F12 â†’ Storage â†’ Clear All

## ðŸ“Š ç‰ˆæœ¬å¯¹æ¯”

| ç‰ˆæœ¬   | çŠ¶æ€åˆ— | æ—¥æœŸåˆ—å¸ƒå±€ | æäº¤ID  |
|--------|--------|------------|---------|
| v4.8   | âŒ     | æ­£å¸¸       | -       |
| v4.9   | âœ…     | æ­£å¸¸       | 9d3269b |
| v4.10  | âœ…     | æ­£å¸¸       | 957f746 |
| v4.11  | âœ…     | **ä¼˜åŒ–**   | f790995 |

## ðŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æžœéƒ¨ç½²åŽé—®é¢˜ä»å­˜åœ¨ï¼Œè¯·æä¾›ï¼š
1. Gitç‰ˆæœ¬æ£€æŸ¥ç»“æžœ: `git log --oneline -5`
2. ä»£ç æ£€æŸ¥ç»“æžœ: `grep -n "td_type.replace" src/app/page.tsx`
3. Dockerå®¹å™¨çŠ¶æ€: `docker ps`
4. æµè§ˆå™¨å¼€å‘è€…å·¥å…·Consoleæˆªå›¾
5. å¼¹çª—å®Œæ•´æˆªå›¾

---

**éƒ¨ç½²æ—¶é—´**: 2025-10-02
**ç›®æ ‡ç‰ˆæœ¬**: v4.11 (commit: f790995)
**é¢„è®¡è€—æ—¶**: 5-10åˆ†é’Ÿ
