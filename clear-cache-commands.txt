# 🔧 清理缓存和验证部署

# ============================================
# 方法1: 浏览器强制刷新（最简单）
# ============================================

Windows/Linux:
按住 Ctrl + Shift，然后按 R
或
按住 Ctrl，然后按 F5

Mac:
按住 Cmd + Shift，然后按 R

# ============================================
# 方法2: 清理浏览器缓存（推荐）
# ============================================

Chrome/Edge:
1. 按 F12 打开开发者工具
2. 右键点击刷新按钮
3. 选择"清空缓存并硬性重新加载"

或者:
1. 按 Ctrl+Shift+Delete
2. 选择"缓存的图片和文件"
3. 时间范围选"全部时间"
4. 点击"清除数据"

# ============================================
# 方法3: 无痕模式测试（验证用）
# ============================================

Chrome: Ctrl + Shift + N
Edge: Ctrl + Shift + P
Firefox: Ctrl + Shift + P

然后访问: http://bk.yushuo.click

# ============================================
# 方法4: 服务器端清理Next.js缓存
# ============================================

# 在SSH终端执行：

cd /www/wwwroot/stock-tracker

# 清理Next.js构建缓存
docker compose exec stock-tracker rm -rf .next

# 重启应用容器
docker compose restart stock-tracker

# 等待启动
sleep 10

# 查看日志
docker compose logs --tail=50 stock-tracker

# 测试访问（查看ETag是否变化）
curl -I http://bk.yushuo.click

# ============================================
# 验证新代码是否真的部署了
# ============================================

# 检查新组件文件是否存在
ls -lh src/components/StockPremiumChart.tsx
ls -lh src/lib/chartHelpers.ts

# 检查page.tsx文件修改时间
ls -lh src/app/page.tsx

# 查看Git提交
git log -1 --oneline

# 预期输出: 51089c2 🎨 v4.3: Premium UI升级 - 7大功能实现